<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>
  <link rel="stylesheet" type="text/css" href="http://jonnyreeves.co.uk/theme/css/style.min.css">
  <link rel="stylesheet" type="text/css" href="http://jonnyreeves.co.uk/theme/css/pygments.min.css">
  <link rel="stylesheet" type="text/css" href="http://jonnyreeves.co.uk/theme/css/font-awesome.min.css">
  <link href="http://jonnyreeves.co.uk/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Jonny Reeves Atom">

  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />
  <meta name="author" content="Jonny Reeves" />
  <meta name="description" content="" />
<meta property="og:site_name" content="Jonny Reeves"/>
<meta property="og:type" content="blog"/>
<meta property="og:title" content="Jonny Reeves"/>
<meta property="og:description" content=""/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="http://jonnyreeves.co.uk"/>
<meta property="og:image" content="/images/avatar.jpg">
  <title>Jonny Reeves &ndash; Posts by: Jonny Reeves</title>
</head>
<body>
  <aside>
    <div>
      <a href="http://jonnyreeves.co.uk">
        <img src="/images/avatar.jpg" alt="Jonny Reeves" title="Jonny Reeves">
      </a>
      <h1><a href="http://jonnyreeves.co.uk">Jonny Reeves</a></h1>
      <p>code && coffee || music</p>
      <nav>
        <ul class="list">
        </ul>
      </nav>
      <ul class="social">
        <li><a class="sc-linkedin" href="https://br.linkedin.com/in/jonnyreeves/en" target="_blank"><i class="fa fa-linkedin"></i></a></li>
        <li><a class="sc-google" href="https://plus.google.com/+JohnReeves" target="_blank"><i class="fa fa-google"></i></a></li>
        <li><a class="sc-stack-overflow" href="http://stackoverflow.com/users/227349/jonnyreeves" target="_blank"><i class="fa fa-stack-overflow"></i></a></li>
        <li><a class="sc-github" href="https://github.com/jonnyreeves" target="_blank"><i class="fa fa-github"></i></a></li>
      </ul>
    </div>
  </aside>
  <main>

<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2016/testing-setting-http-cookies-in-go/#testing-setting-http-cookies-in-go">Testing Setting HTTP Cookies in Go</a></h2>
    <p>
      Posted on Thu 04 February 2016 in <a href="http://jonnyreeves.co.uk/category/golang.html">Golang</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2016/testing-setting-http-cookies-in-go/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>I found myself writing code that drops HTTP Cookies on a HTTP ResponseWriter
and had trouble figuring out how to test it:</p>
<div class="highlight"><pre><span class="kd">type</span> <span class="nx">Preferences</span> <span class="kd">struct</span> <span class="p">{</span>
    <span class="nx">Colour</span> <span class="kt">string</span>
<span class="p">}</span>

<span class="kd">func</span> <span class="nx">SetPreferencesCookie</span><span class="p">(</span><span class="nx">w</span> <span class="nx">http</span><span class="p">.</span><span class="nx">ResponseWriter</span><span class="p">,</span> <span class="nx">prefs</span> <span class="o">*</span><span class="nx">Preferences</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="nx">data</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">json</span><span class="p">.</span><span class="nx">Marshal</span><span class="p">(</span><span class="nx">prefs</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
        <span class="k">return</span> <span class="nx">err</span>
    <span class="p">}</span>
    <span class="nx">http</span><span class="p">.</span><span class="nx">SetCookie</span><span class="p">(</span><span class="nx">w</span><span class="p">,</span> <span class="o">&amp;</span><span class="nx">http</span><span class="p">.</span><span class="nx">Cookie ...</span></pre></div>
      <a class="btn" href="http://jonnyreeves.co.uk/2016/testing-setting-http-cookies-in-go/#testing-setting-http-cookies-in-go">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2016/shrinkwrap-your-npm-dependencies/#shrinkwrap-your-npm-dependencies">Shrinkwrap your NPM Dependencies</a></h2>
    <p>
      Posted on Mon 04 January 2016 in <a href="http://jonnyreeves.co.uk/category/javascript.html">JavaScript</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2016/shrinkwrap-your-npm-dependencies/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>Things move a little too quickly in the NPM ecosystem for my liking at times, modules updates can turn a working project into a broken build with a single <code>npm install</code>; this is especially bad news if your <a href="https://en.wikipedia.org/wiki/Continuous_integration">Continuous Integration</a> server is pulling your NPM dependencies with each build.  Sometimes ...</p>
      <a class="btn" href="http://jonnyreeves.co.uk/2016/shrinkwrap-your-npm-dependencies/#shrinkwrap-your-npm-dependencies">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/mysql-getting-killed-on-low-end-vps/#mysql-getting-killed-on-low-end-vps">MySQL Getting Killed on Low-end VPS</a></h2>
    <p>
      Posted on Fri 11 December 2015 in <a href="http://jonnyreeves.co.uk/category/devops.html">DevOps</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/mysql-getting-killed-on-low-end-vps/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>My wife's blog is powered by Wordpress running on a <a href="https://www.bhost.net/">bHost Tiny VPS</a> instance (1GB RAM) using a combination of MariaDB, Nginx and php-fpm.  Thanks to <a href="https://en-gb.wordpress.org/plugins/wp-super-cache/">WP Super Cache</a>; the site is pretty responsive.</p>
<p>Things had been going pretty well for the last couple of months until she told ...</p>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/mysql-getting-killed-on-low-end-vps/#mysql-getting-killed-on-low-end-vps">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/dont-always-npm-install-g/#dont-always-npm-install-g">Don't (always) npm install -g</a></h2>
    <p>
      Posted on Thu 26 November 2015 in <a href="http://jonnyreeves.co.uk/category/javascript.html">JavaScript</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/dont-always-npm-install-g/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>Had a chat with a respected hacker friend of mine who did not know about this trick (although to be fair, I'm not sure I knew about it until all that long ago).</p>
<p>There's almost never any need to use <code>npm install -g</code>, you could argue it's ...</p>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/dont-always-npm-install-g/#dont-always-npm-install-g">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/testing-querystrings-in-httprequest/#testing-querystrings-in-httprequest">Testing QueryStrings in http.Request</a></h2>
    <p>
      Posted on Sat 14 November 2015 in <a href="http://jonnyreeves.co.uk/category/golang.html">Golang</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/testing-querystrings-in-httprequest/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>This one threw me; say you have a subject that reads a value from an HTTP Request's Query, something like this:</p>
<div class="highlight"><pre><span class="kd">func</span> <span class="nx">ValidateState</span><span class="p">(</span><span class="nx">req</span> <span class="o">*</span><span class="nx">http</span><span class="p">.</span><span class="nx">Request</span><span class="p">)</span> <span class="kt">error</span> <span class="p">{</span>
    <span class="nx">fwdState</span> <span class="o">:=</span> <span class="nx">req</span><span class="p">.</span><span class="nx">URL</span><span class="p">.</span><span class="nx">Query</span><span class="p">().</span><span class="nx">Get</span><span class="p">(</span><span class="s">&quot;state&quot;</span><span class="p">)</span>
    <span class="k">if</span> <span class="nx">fwdState</span> <span class="o">!=</span><span class="p">=</span> <span class="s">&quot;expected&quot;</span> <span class="p">{</span>
      <span class="k">return</span> <span class="nx">fmt</span><span class="p">.</span><span class="nx">Errorf</span><span class="p">(</span><span class="s">&quot;Unexpected state value: %s&quot;</span><span class="p">,</span> <span class="nx">fwdState</span><span class="p">)</span>
    <span class="p">}</span>
    <span class="k">return</span> <span class="kc">nil</span>
<span class="p">}</span>
</pre></div>


<p>In order to ...</p>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/testing-querystrings-in-httprequest/#testing-querystrings-in-httprequest">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/live-reloading-in-express/#live-reloading-in-express">Live Reloading in Express</a></h2>
    <p>
      Posted on Sat 31 October 2015 in <a href="http://jonnyreeves.co.uk/category/javascript.html">JavaScript</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/live-reloading-in-express/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>Gaffa tape time.  Getting iteration times down is important when building software, if nothing else it makes it more fun and help you keep the flow going.  With this in mind, let's get live reloading working with <a href="https://github.com/janl/mustache.js/">Mustache templates</a> on an <a href="https://www.npmjs.com/package/express">express</a>-based local development server.</p>
<p>Let's start ...</p>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/live-reloading-in-express/#live-reloading-in-express">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/babel-npm/#babel-npm">Babel ❤ NPM</a></h2>
    <p>
      Posted on Sat 24 October 2015 in <a href="http://jonnyreeves.co.uk/category/javascript.html">JavaScript</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/babel-npm/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>Once you go ES6, you never go back ;)  In order to create ES5-backwards-compatible modules, there's are a few nuances that you need to be aware of:</p>
<h3>babelify</h3>
<p>Transpiling your NPM modules to ES5 with <a href="https://babeljs.io/">babel</a> will allow them to work in a wide variety of environments.  Add a <code>prepublish ...</code></p>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/babel-npm/#babel-npm">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/mocking-xmlhttprequests-in-jasmine/#mocking-xmlhttprequests-in-jasmine">Mocking XMLHttpRequests in Jasmine</a></h2>
    <p>
      Posted on Mon 19 October 2015 in <a href="http://jonnyreeves.co.uk/category/javascript.html">javascript</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/mocking-xmlhttprequests-in-jasmine/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>When writing integration tests, it's often useful to fake network requests so your tests can be predictable and execute quickly.  Jasmine provides <a href="https://github.com/jasmine/jasmine-ajax"><code>jasmine-ajax</code></a> which will replace the <code>XMLHttpRequest</code> constructor on the global (eg: <code>window</code>).</p>
<p>Wiring up jasmine.Ajax into your test-suites' lifecycle is pretty straight forward:</p>
<div class="highlight"><pre><span class="kr">import</span> <span class="s1">&#39;jasmine-ajax&#39;</span><span class="p">;</span>

<span class="nx">describe ...</span></pre></div>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/mocking-xmlhttprequests-in-jasmine/#mocking-xmlhttprequests-in-jasmine">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/single-page-app-versioning/#single-page-app-versioning">Single Page App Versioning</a></h2>
    <p>
      Posted on Sat 26 September 2015 in <a href="http://jonnyreeves.co.uk/category/2015.html">2015</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/single-page-app-versioning/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>Versioning applications isn't quite as clear cut as <a href="http://semver.org/">versioning libraries</a>; individuals on teams will almost certainly fork the codebase to work on features (sometimes long-lived) but you will still want to provide an easy, and consistent way to refer to each build generated from your Continuous Integration system.</p>
<p>My ...</p>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/single-page-app-versioning/#single-page-app-versioning">Continue reading</a>
  </div>
  <hr />
</article>
<article>
  <header>
    <h2><a href="http://jonnyreeves.co.uk/2015/getting-proper-stack-traces-with-mocha-and-typescript/#getting-proper-stack-traces-with-mocha-and-typescript">Getting Proper Stack Traces with Mocha and TypeScript</a></h2>
    <p>
      Posted on Thu 20 August 2015 in <a href="http://jonnyreeves.co.uk/category/typescript.html">TypeScript</a>
      &#8226; <a href="http://jonnyreeves.co.uk/2015/getting-proper-stack-traces-with-mocha-and-typescript/#disqus_thread">Leave a comment</a>
    </p>
  </header>
  <div>
      <p>Mocha and TypeScript are awesome when everything's working, but when you have a failing test something's not quite right:</p>
<div class="highlight"><pre><span class="p">$</span><span class="nv">npm</span><span class="x"> test</span>

<span class="x">  Calculator</span>
<span class="x">    </span><span class="cp">#</span><span class="nf">add</span><span class="x"></span>
<span class="x">      1) should work</span>


<span class="x">  0 passing (21ms)</span>
<span class="x">  1 failing</span>

<span class="x">  1) Calculator </span><span class="cp">#</span><span class="nf">add</span><span class="x"> should work:</span>

<span class="x">      AssertionError: expected 6 to equal 7</span>
<span class="x">      + expected - actual</span>

<span class="x">      -6</span>
<span class="x">      +7</span>

<span class="x">      at Context ...</span></pre></div>
      <a class="btn" href="http://jonnyreeves.co.uk/2015/getting-proper-stack-traces-with-mocha-and-typescript/#getting-proper-stack-traces-with-mocha-and-typescript">Continue reading</a>
  </div>
</article>

  <div class="pagination">
    <a class="btn" href="http://jonnyreeves.co.uk/author/jonny-reeves2.html">
      <i class="fa fa-angle-left"></i> Older Posts
    </a>
  </div>

    <footer>
      <p>&copy; Jonny Reeves </p>
<p>Built using <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a></p>    </footer>
  </main>
<script type="text/javascript">
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-30309890-1', 'auto');
  ga('send', 'pageview');
</script>
<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Jonny Reeves ",
  "url" : "http://jonnyreeves.co.uk",
  "image": "/images/avatar.jpg",
  "description": ""
}
</script><script type="text/javascript">
    var disqus_shortname = 'jonnyreeves';
    (function () {
        var s = document.createElement('script'); s.async = true;
        s.type = 'text/javascript';
        s.src = '//' + disqus_shortname + '.disqus.com/count.js';
        (document.getElementsByTagName('HEAD')[0] || document.getElementsByTagName('BODY')[0]).appendChild(s);
    }());
</script>
</body>
</html>